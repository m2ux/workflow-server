id: validate
version: 2.3.0
name: Verify & Validate Design
description: "Validate the implementation through testing and build verification. Test suite quality was already reviewed in implement phase."
problem: User needs to validate the implementation passes all tests
recognition[3]:
  - validate implementation
  - run tests
  - verify build
skills:
  primary: validate-build
required: true
estimatedTime: 15-30m
rules[1]:
  - "Validation protocol and domain rules are in the validation skill"
modeOverrides:
  review:
    description: "Run validation checks and document failures as review findings (do not fix)."
    rules[3]:
      - Run existing tests to verify they pass as claimed by the PR
      - Document failures as review findings - do NOT fix them (that's the PR author's job)
      - Failures become critical findings in the review summary
    steps[2]:
      - id: document-failures
        name: Document Failures as Findings
        description: "Document all test/build/lint failures as review findings with severity (critical for test failures, high for build failures). Do NOT attempt to fix."
      - id: assess-test-coverage
        name: Assess Test Coverage
        description: "Evaluate whether the tests added are sufficient for the changes made. Check coverage of edge cases and error paths."
    skipSteps[1]:
      - fix-failures
    context_to_preserve[2]:
      - validation_failures - List of failures documented as findings
      - test_coverage_assessment - Evaluation of test sufficiency
steps[4]:
  - id: run-tests
    name: Run all tests
    description: "Execute unit, integration, e2e tests. Observe and record results."
  - id: verify-build
    name: Verify build succeeds
    description: "Run build. Observe and record result."
  - id: check-lint
    name: Check for linter errors
    description: "Run linter. Observe and record results."
  - id: fix-failures
    name: Fix any failures
    description: "Analyze root cause of test/build/lint failures, fix, and re-run. Repeat until all pass."
    condition:
      type: simple
      variable: has_failures
      operator: ==
      value: true
transitions[1]{to,isDefault}:
  strategic-review,true
outcome[2]:
  - All tests passing
  - Build successful
context_to_preserve[3]:
  - test_results - Test execution results
  - build_status - Build success/failure status
  - validation_passed - Whether all validation checks passed
