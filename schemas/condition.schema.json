{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "condition",
  "description": "Condition expressions for controlling transitions, decisions, and loops. Supports simple comparisons and composable boolean logic (and, or, not).",
  "$ref": "#/definitions/condition",
  "definitions": {
    "condition": {
      "anyOf": [
        {
          "type": "object",
          "description": "Simple condition: compare a workflow variable to a value using an operator",
          "properties": {
            "type": {
              "type": "string",
              "const": "simple",
              "description": "Condition type: simple comparison"
            },
            "variable": {
              "type": "string",
              "description": "Name of the workflow variable to evaluate"
            },
            "operator": {
              "type": "string",
              "enum": [
                "==",
                "!=",
                ">",
                "<",
                ">=",
                "<=",
                "exists",
                "notExists"
              ],
              "description": "Comparison operator. 'exists'/'notExists' check whether the variable is defined (value field is ignored for these)."
            },
            "value": {
              "type": [
                "string",
                "number",
                "boolean",
                "null"
              ],
              "description": "Value to compare against. Not required for exists/notExists operators."
            }
          },
          "required": [
            "type",
            "variable",
            "operator"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "description": "AND condition: all sub-conditions must be true",
          "properties": {
            "type": {
              "type": "string",
              "const": "and",
              "description": "Condition type: logical AND"
            },
            "conditions": {
              "type": "array",
              "items": {},
              "minItems": 2,
              "description": "Array of conditions that must ALL evaluate to true"
            }
          },
          "required": [
            "type",
            "conditions"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "description": "OR condition: at least one sub-condition must be true",
          "properties": {
            "type": {
              "type": "string",
              "const": "or",
              "description": "Condition type: logical OR"
            },
            "conditions": {
              "type": "array",
              "items": {},
              "minItems": 2,
              "description": "Array of conditions where at least ONE must evaluate to true"
            }
          },
          "required": [
            "type",
            "conditions"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "description": "NOT condition: negates a single sub-condition",
          "properties": {
            "type": {
              "type": "string",
              "const": "not",
              "description": "Condition type: logical NOT"
            },
            "condition": {
              "description": "The condition to negate"
            }
          },
          "required": [
            "type",
            "condition"
          ],
          "additionalProperties": false
        }
      ]
    }
  }
}
