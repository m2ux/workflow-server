id: test-review
version: 1.0.0
capability: Review test suite quality, coverage, and identify anti-patterns
execution_pattern:
  start[2]:
    - Load test-review resource for full guidance
    - Identify all test files in the project
  analysis[4]:
    - Assess test coverage and gaps
    - Check for anti-patterns (flaky tests, over-mocking)
    - Verify test isolation and independence
    - Review assertion quality
  completion[2]:
    - Document findings and recommendations
    - Summarize issues for checkpoint
tools:
  get_resource:
    when: Starting test review
    params: "resource_id: test-review, workflow_id: work-package"
    returns: Full test review guidance document
    usage: Reference for review criteria
  shell:
    when: Running test suite
    usage: Execute tests to verify they pass
  read_file:
    when: Reviewing test implementations
    usage: Examine test structure and assertions
  grep:
    when: Searching for test patterns
    usage: Find test files, check coverage patterns
resource: test-review
state:
  track[4]:
    - test_files_reviewed
    - coverage_assessment
    - anti_patterns_found
    - recommendations
  initialize: "Empty lists, no coverage data"
  update_on:
    file_reviewed: "Add to test_files_reviewed"
    pattern_found: "Add to anti_patterns_found"
    gap_identified: "Add to recommendations"
flow[5]:
  - 1. Call get_resource to load test review guidance
  - 2. Run test suite to establish baseline
  - 3. Review test files following guidance criteria
  - 4. Document findings with severity and recommendations
  - 5. Present summary at validation checkpoint
errors:
  tests_fail:
    cause: Test suite not passing
    recovery: Fix failing tests before review
  no_tests:
    cause: No test files found
    recovery: Document missing tests as critical finding
